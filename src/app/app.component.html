<!-- Header is displayed here -->
<app-header></app-header>

<!-- Form for user entry is displayed here -->
<!-- Complete the necessary binding and add the required validator to the input elements -->
<div class="alert alert-danger m-auto" *ngIf="flag">{{errorMessage}}</div>
<div class="data-form">
  <form #bookForm="ngForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="bookname">Book Name</label>
      <input name="bookname" [(ngModel)]="book.name" required type="text" #name="ngModel" class="form-control"
        id="bookname" placeholder="Book name">

      <div *ngIf="name.touched && name.invalid && name.errors.required" class="alert alert-danger">Book name is required
      </div>

    </div>

    <div class="form-group">
      <label for="author">Author</label>
      <input name="author" [(ngModel)]="book.author" required type="text" class="form-control" id="author"
        #author="ngModel" placeholder="Author name">

      <div class="alert alert-danger" *ngIf="author.touched && author.invalid && author.errors.required">Author name is
        required</div>

    </div>

    <div class="form-group">
      <label for="year">Year</label>
      <input name="year" [(ngModel)]="book.year" required type="text" class="form-control" id="year" #year="ngModel"
        placeholder="Year" pattern="[0-9]*" minlength="4" maxlength="4">

      <div class="alert alert-danger" *ngIf="year.touched && year.invalid && year.errors.required ">Year is required
      </div>
      <div class="alert alert-danger" *ngIf="year.touched && year.invalid">Year must be of 4 digits
      </div>



    </div>

    <div class="form-group">
      <label for="language">Language</label>
      <input name="language" [(ngModel)]="book.language" required type="text"
        [class.is-invalid]="language.invalid && language.touched" class="form-control" id="language" #language="ngModel"
        placeholder="language" pattern="[A-Za-z]*">
      <div class="alert alert-danger" *ngIf="language.invalid && language.errors.required && language.touched">Language
        is required</div>
    </div>
    <button type="submit" class="btn btn-primary">Add Book</button>
  </form>
</div>
<!-- Data will be displayed as table here -->

<div class="data-table">
  <table class="table table-striped table-dark">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col" colspan="2">Name</th>
        <th scope="col">Author</th>
        <th scope="col">Year</th>
        <th scope="col">Language</th>
      </tr>
    </thead>
    <!-- Perform the appropriate data binding here -->
    <tbody>
      <tr *ngFor="let book of books;index as i">
        <th scope="row">{{i+1}}</th>
        <td colspan="2">{{book.name}}</td>
        <td>{{book.author}}</td>
        <td>{{book.year}}</td>
        <td>{{book.language}}</td>
      </tr>
    </tbody>
  </table>
</div>
